!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.chordbox=o():e.chordbox=o()}(global,(()=>(()=>{"use strict";var e={};const o=require("@svgdotjs/svg.js");var t=(0,require("svgdom").createSVGWindow)(),r=t.document;return(0,o.registerWindow)(t,r),e.default})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hvcmRib3gudW1kLmpzIiwibWFwcGluZ3MiOiJDQUFBLFNBQTJDQSxFQUFNQyxHQUMxQixpQkFBWkMsU0FBMEMsaUJBQVhDLE9BQ3hDQSxPQUFPRCxRQUFVRCxJQUNRLG1CQUFYRyxRQUF5QkEsT0FBT0MsSUFDOUNELE9BQU8sR0FBSUgsR0FDZSxpQkFBWkMsUUFDZEEsUUFBa0IsU0FBSUQsSUFFdEJELEVBQWUsU0FBSUMsR0FDcEIsQ0FURCxDQVNHSyxRQUFRLEksNEJDVFgsTUFBTSxFQUErQkMsUUFBUSxvQkNJN0MsSUFBTUMsR0FBU0MsRUNKc0JGLFFBQVEsVURJOUJFLG1CQUNUQyxFQUFXRixFQUFPRSxTLE9BQ3hCQyxFQUFBQSxFQUFBQSxnQkFBZUgsRUFBUUUsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2Nob3JkYm94L3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9jaG9yZGJveC9leHRlcm5hbCBjb21tb25qcyBcIkBzdmdkb3Rqcy9zdmcuanNcIiIsIndlYnBhY2s6Ly9jaG9yZGJveC8uL3NyYy9jaG9yZGJveC50c3giLCJ3ZWJwYWNrOi8vY2hvcmRib3gvZXh0ZXJuYWwgY29tbW9uanMgXCJzdmdkb21cIiJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJjaG9yZGJveFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJjaG9yZGJveFwiXSA9IGZhY3RvcnkoKTtcbn0pKGdsb2JhbCwgKCkgPT4ge1xucmV0dXJuICIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiQHN2Z2RvdGpzL3N2Zy5qc1wiKTsiLCJpbXBvcnQgeyBTVkcsIHJlZ2lzdGVyV2luZG93IH0gZnJvbSBcIkBzdmdkb3Rqcy9zdmcuanNcIlxuaW1wb3J0IHsgY3JlYXRlU1ZHV2luZG93IH0gZnJvbSBcInN2Z2RvbVwiXG5cbi8qIGVzbGludC1kaXNhYmxlICovXG5jb25zdCB3aW5kb3cgPSBjcmVhdGVTVkdXaW5kb3coKVxuY29uc3QgZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnRcbnJlZ2lzdGVyV2luZG93KHdpbmRvdywgZG9jdW1lbnQpXG4vKiBlc2xpbnQtZW5hYmxlICovXG5cbmltcG9ydCB7XG4gIENob3JkQm94UmVuZGVyZXIsXG4gIENob3JkQm94T3B0aW9ucyxcbiAgQ2hvcmRCb3hEb3Rcbn0gZnJvbSAnLi90eXBlcydcblxuLy8gdGhlIHRoaW5ncyBhIHVzZXIgY2FuIGNvbmZpZ3VyZVxuY29uc3QgQ2hvcmRCb3hPcHRpb25zRGVmYXVsdHMgPSB7XG4gIHRpdGxlOiAnQ2hvcmQnLFxuICBmcmV0czogMyxcbiAgYmFzZUZyZXQ6IDEsXG4gIGRvdHM6IFtdIGFzIENob3JkQm94RG90W10sXG4gIGRvdFRleHQ6ICgpID0+ICcnLFxuICB0dW5pbmdzOiBbJ0UnLCAnQScsICdEJywgJ0cnLCAnQicsICdFJ10sXG4gIGd1YWdlczogWzQ2LCAzNiwgMjUsIDE3LCAxMywgMTBdLFxufVxuXG5jb25zdCBDSE9SREJPWF9ESU1FTlNJT05TID0ge1xuICAvLyBiYXNlXG4gIHdpZHRoOiAyODUsXG4gIGhlaWdodDogMzUwLFxuICBwYWRkaW5nOiA1LFxuICByYWRpdXM6IDUsXG4gIGJvcmRlckZpbGxDb2xvcjogJyMwMDAnLFxuICBmaWxsQ29sb3I6ICcjZmZmJyxcblxuICAvLyB0aXRsZVxuICB0aXRsZVdpZHRoOiAyNzUsXG4gIHRpdGxlSGVpZ2h0OiA1MCxcbiAgdGl0bGVGaWxsQ29sb3I6ICcjMDAwJyxcbiAgdGl0bGVGb250U2l6ZTogMjQsXG4gIHRpdGxlRm9udENvbG9yOiAnI2ZmZicsXG5cbiAgZnJldExhYmVsc1dpZHRoOiA1MCxcbiAgZnJldExhYmVsc0NvbnRhaW5lckZpbGxDb2xvcjogJyNmZmYnLFxuXG4gIGZyZXRMYWJlbENvbnRhaW5lckZpbGxDb2xvcjogJyNmZmYnLFxuICBmcmV0TGFiZWxGb250U2l6ZTogMTYsXG4gIGZyZXRMYWJlbEZvbnRDb2xvcjogJyMwMDAnLFxuXG4gIHN0cmluZ0xhYmVsc0hlaWdodDogNTAsXG4gIHN0cmluZ0xhYmVsc0NvbnRhaW5lckZpbGxDb2xvcjogJyNmZmYnLFxuXG4gIHN0cmluZ0xhYmVsQ29udGFpbmVyRmlsbENvbG9yOiAnI2ZmZicsXG4gIHN0cmluZ0xhYmVsRm9udFNpemU6IDE2LFxuICBzdHJpbmdMYWJlbEZvbnRDb2xvcjogJyMwMDAnLFxuXG4gIGJvZHlGaWxsQ29sb3I6ICcjZmZmJyxcblxuICBudXRDb250YWluZXJQYWRkaW5nOiAxNSxcbiAgbnV0SGVpZ2h0OiAxMCxcbiAgbnV0UmFkaXVzOiAzLFxuICBudXRGaWxsQ29sb3I6ICcjMDAwJyxcblxuICBmcmV0c0NvbnRhaW5lckZpbGxDb2xvcjogJyNmZmYnLFxuICBcbiAgZnJldE1hcmtlckhlaWdodDogMyxcbiAgZnJldE1hcmtlckZpbGxDb2xvcjogJyNDMEMwQzAnLFxuXG4gIHN0cmluZ0ZpbGxDb2xvcjogJyNFNDhDNUQnLFxuXG4gIGRvdFNpemU6IDMwLFxuICBkb3RGb250U2l6ZTogMTIsXG4gIGRvdEZpbGxDb2xvcjogJyMwMDAnXG59XG5jbGFzcyBDaG9yZEJveCB7XG5cbiAgcHJpdmF0ZSByZW5kZXJlcjogQ2hvcmRCb3hSZW5kZXJlclxuXG4gIHByaXZhdGUgY2hvcmRCb3hPcHRpb25zOiBDaG9yZEJveE9wdGlvbnMgPSBDaG9yZEJveE9wdGlvbnNEZWZhdWx0c1xuXG4gIGNvbnN0cnVjdG9yIChjaG9yZEJveE9wdGlvbnM6IENob3JkQm94T3B0aW9ucykge1xuICAgIHRoaXMucmVuZGVyZXIgPSBTVkcoKVxuXG4gICAgLy8gYXNzaWduIG9wdGlvbnNcbiAgICB0aGlzLmNob3JkQm94T3B0aW9ucyA9IHtcbiAgICAgIC4uLnRoaXMuY2hvcmRCb3hPcHRpb25zLFxuICAgICAgLi4uY2hvcmRCb3hPcHRpb25zXG4gICAgfVxuXG4gICAgdGhpcy52YWxpZGF0ZUNob3JkQm94T3B0aW9ucygpXG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgcHJpdmF0ZSB2YWxpZGF0ZUNob3JkQm94T3B0aW9ucyAoKSB7XG4gICAgaWYgKHRoaXMuY2hvcmRCb3hPcHRpb25zLmZyZXRzIDwgMSB8fCB0aGlzLmNob3JkQm94T3B0aW9ucy5mcmV0cyA+IDYpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZnJldHMgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDYnKVxuICAgIH1cblxuICAgIGlmICh0aGlzLmNob3JkQm94T3B0aW9ucy5iYXNlRnJldCA8IDEgfHwgdGhpcy5jaG9yZEJveE9wdGlvbnMuYmFzZUZyZXQgPiAyNCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdiYXNlRnJldCBtdXN0IGJlIGJldHdlZW4gMSBhbmQgMjQnKVxuICAgIH1cblxuICAgIGlmICh0aGlzLmNob3JkQm94T3B0aW9ucy50dW5pbmdzLmxlbmd0aCAhPT0gNikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd0dW5pbmcgbXVzdCBwcmVzZW50IGZvciA2IHN0cmluZ3Mgb25seScpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY2hvcmRCb3hPcHRpb25zLmd1YWdlcy5sZW5ndGggIT09IDYpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZ3VhZ2VzIG11c3QgcHJlc2VudCBmb3IgNiBzdHJpbmdzIG9ubHknKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVDaG9yZEJveEJhc2UgKCkge1xuICAgIGNvbnN0IGNob3JkQm94QmFzZUdyb3VwID0gU1ZHKCkuZ3JvdXAoKVxuXG4gICAgY29uc3QgY2hvcmRCb3hCYXNlQ29udGFpbmVyID0gU1ZHKClcbiAgICAgIC5yZWN0KFxuICAgICAgICBDSE9SREJPWF9ESU1FTlNJT05TLndpZHRoLFxuICAgICAgICBDSE9SREJPWF9ESU1FTlNJT05TLmhlaWdodClcbiAgICAgIC5yYWRpdXMoQ0hPUkRCT1hfRElNRU5TSU9OUy5yYWRpdXMpXG4gICAgICAuZmlsbChDSE9SREJPWF9ESU1FTlNJT05TLmJvcmRlckZpbGxDb2xvcilcblxuICAgIGNvbnN0IGNob3JkQm94QmFzZSA9ICBTVkcoKVxuICAgICAgLnJlY3QoXG4gICAgICAgIENIT1JEQk9YX0RJTUVOU0lPTlMud2lkdGgtKDIqQ0hPUkRCT1hfRElNRU5TSU9OUy5wYWRkaW5nKSxcbiAgICAgICAgQ0hPUkRCT1hfRElNRU5TSU9OUy5oZWlnaHQtKDIqQ0hPUkRCT1hfRElNRU5TSU9OUy5wYWRkaW5nKSlcbiAgICAgIC5maWxsKENIT1JEQk9YX0RJTUVOU0lPTlMuZmlsbENvbG9yKVxuXG4gICAgY2hvcmRCb3hCYXNlR3JvdXAuYWRkKGNob3JkQm94QmFzZUNvbnRhaW5lcilcbiAgICBjaG9yZEJveEJhc2VHcm91cC5hZGQoY2hvcmRCb3hCYXNlKVxuXG4gICAgY2hvcmRCb3hCYXNlQ29udGFpbmVyLmJhY2soKVxuICAgIGNob3JkQm94QmFzZS5mcm9udCgpXG5cbiAgICBjaG9yZEJveEJhc2UubW92ZShcbiAgICAgIENIT1JEQk9YX0RJTUVOU0lPTlMucGFkZGluZyxcbiAgICAgIENIT1JEQk9YX0RJTUVOU0lPTlMucGFkZGluZ1xuICAgIClcblxuICAgIHJldHVybiBjaG9yZEJveEJhc2VHcm91cFxuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUNob3JkQm94VGl0bGUgKCkge1xuICAgIGNvbnN0IGNob3JkQm94VGl0bGVHcm91cCA9IFNWRygpLmdyb3VwKClcblxuICAgIGNvbnN0IGNob3JkQm94VGl0bGVDb250YWluZXIgPSBTVkcoKVxuICAgICAgLnJlY3QoXG4gICAgICAgIENIT1JEQk9YX0RJTUVOU0lPTlMudGl0bGVXaWR0aCxcbiAgICAgICAgQ0hPUkRCT1hfRElNRU5TSU9OUy50aXRsZUhlaWdodFxuICAgICAgKVxuICAgICAgLmZpbGwoQ0hPUkRCT1hfRElNRU5TSU9OUy50aXRsZUZpbGxDb2xvcilcblxuICAgIGNvbnN0IENob3JkQm94VGl0bGUgPSBTVkcoKVxuICAgICAgLnBsYWluKHRoaXMuY2hvcmRCb3hPcHRpb25zLnRpdGxlKVxuICAgICAgLmF0dHIoe1xuICAgICAgICAnZm9udC1zaXplJzogQ0hPUkRCT1hfRElNRU5TSU9OUy50aXRsZUZvbnRTaXplLFxuICAgICAgICAnZm9udC1mYW1pbHknOiAnQXJpYWwnXG4gICAgICB9KVxuICAgICAgLmZpbGwoQ0hPUkRCT1hfRElNRU5TSU9OUy50aXRsZUZvbnRDb2xvcilcbiAgICAgIC5jeChDSE9SREJPWF9ESU1FTlNJT05TLnRpdGxlV2lkdGgvMilcbiAgICAgIC5jeShDSE9SREJPWF9ESU1FTlNJT05TLnRpdGxlSGVpZ2h0LzIpXG5cbiAgICBjaG9yZEJveFRpdGxlR3JvdXAuYWRkKGNob3JkQm94VGl0bGVDb250YWluZXIpXG4gICAgY2hvcmRCb3hUaXRsZUdyb3VwLmFkZChDaG9yZEJveFRpdGxlKVxuXG4gICAgY2hvcmRCb3hUaXRsZUNvbnRhaW5lci5iYWNrKClcbiAgICBDaG9yZEJveFRpdGxlLmZyb250KClcblxuICAgIGNob3JkQm94VGl0bGVHcm91cC5tb3ZlKFxuICAgICAgQ0hPUkRCT1hfRElNRU5TSU9OUy5wYWRkaW5nLFxuICAgICAgQ0hPUkRCT1hfRElNRU5TSU9OUy5wYWRkaW5nXG4gICAgKVxuXG4gICAgcmV0dXJuIGNob3JkQm94VGl0bGVHcm91cFxuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZWNob3JkQm94RnJldExhYmVscyAoKSB7XG4gICAgY29uc3QgY2hvcmRCb3hGcmV0TGFiZWxzR3JvdXAgPSBTVkcoKS5ncm91cCgpXG5cbiAgICBjb25zdCBmcmV0TGFiZWxzSGVpZ2h0ID0gQ0hPUkRCT1hfRElNRU5TSU9OUy5oZWlnaHQtKDIqQ0hPUkRCT1hfRElNRU5TSU9OUy5wYWRkaW5nKS1DSE9SREJPWF9ESU1FTlNJT05TLnRpdGxlSGVpZ2h0LUNIT1JEQk9YX0RJTUVOU0lPTlMuc3RyaW5nTGFiZWxzSGVpZ2h0XG4gICAgY29uc3QgZnJldExhYmVsSGVpZ2h0ID0gZnJldExhYmVsc0hlaWdodC90aGlzLmNob3JkQm94T3B0aW9ucy5mcmV0c1xuXG4gICAgY29uc3QgY2hvcmRCb3hGcmV0TGFiZWxzQ29udGFpbmVyID0gU1ZHKClcbiAgICAgIC5yZWN0KFxuICAgICAgICBDSE9SREJPWF9ESU1FTlNJT05TLmZyZXRMYWJlbHNXaWR0aCxcbiAgICAgICAgZnJldExhYmVsc0hlaWdodFxuICAgICAgKVxuICAgICAgLmZpbGwoQ0hPUkRCT1hfRElNRU5TSU9OUy5mcmV0TGFiZWxzQ29udGFpbmVyRmlsbENvbG9yKVxuICAgIFxuICAgIGNvbnN0IGNob3JkQm94RnJldGJvYXJkTGFiZWxzID0gQXJyYXlcbiAgICAgIC5mcm9tKEFycmF5KHRoaXMuY2hvcmRCb3hPcHRpb25zLmZyZXRzKSlcbiAgICAgIC5tYXAoKF8sIGZyZXRMYWJlbEluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGNob3JkQm94RnJldExhYmVsR3JvdXA9IFNWRygpLmdyb3VwKClcblxuICAgICAgICBjb25zdCBjaG9yZEJveEZyZXRMYWJlbENvbnRhaW5lciA9IFNWRygpXG4gICAgICAgICAgLnJlY3QoXG4gICAgICAgICAgICBDSE9SREJPWF9ESU1FTlNJT05TLmZyZXRMYWJlbHNXaWR0aCxcbiAgICAgICAgICAgIGZyZXRMYWJlbEhlaWdodFxuICAgICAgICAgIClcbiAgICAgICAgICAuZmlsbChDSE9SREJPWF9ESU1FTlNJT05TLmZyZXRMYWJlbENvbnRhaW5lckZpbGxDb2xvcilcblxuICAgICAgICBjb25zdCBjaG9yZEJveEZyZXRMYWJlbFRleHQgPSBTVkcoKVxuICAgICAgICAgIC5wbGFpbigodGhpcy5jaG9yZEJveE9wdGlvbnMuYmFzZUZyZXQgKyBmcmV0TGFiZWxJbmRleCkudG9TdHJpbmcoKSlcbiAgICAgICAgICAuYXR0cih7XG4gICAgICAgICAgICAnZm9udC1zaXplJzogQ0hPUkRCT1hfRElNRU5TSU9OUy5mcmV0TGFiZWxGb250U2l6ZSxcbiAgICAgICAgICAgICdmb250LWZhbWlseSc6ICdBcmlhbCdcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5maWxsKENIT1JEQk9YX0RJTUVOU0lPTlMuZnJldExhYmVsRm9udENvbG9yKVxuICAgICAgICAgIC5jeChDSE9SREJPWF9ESU1FTlNJT05TLmZyZXRMYWJlbHNXaWR0aC8yKVxuICAgICAgICAgIC5jeShmcmV0TGFiZWxIZWlnaHQvMilcblxuICAgICAgICBjaG9yZEJveEZyZXRMYWJlbEdyb3VwLmFkZChjaG9yZEJveEZyZXRMYWJlbENvbnRhaW5lcilcbiAgICAgICAgY2hvcmRCb3hGcmV0TGFiZWxHcm91cC5hZGQoY2hvcmRCb3hGcmV0TGFiZWxUZXh0KVxuXG4gICAgICAgIGNob3JkQm94RnJldExhYmVsQ29udGFpbmVyLmJhY2soKVxuICAgICAgICBjaG9yZEJveEZyZXRMYWJlbFRleHQuZnJvbnQoKVxuXG4gICAgICAgIGNob3JkQm94RnJldExhYmVsR3JvdXAubW92ZShcbiAgICAgICAgICAwLFxuICAgICAgICAgIGZyZXRMYWJlbEluZGV4KmZyZXRMYWJlbEhlaWdodFxuICAgICAgICApXG5cbiAgICAgICAgcmV0dXJuIGNob3JkQm94RnJldExhYmVsR3JvdXBcbiAgICAgIH0pXG5cbiAgICBjaG9yZEJveEZyZXRMYWJlbHNHcm91cC5hZGQoY2hvcmRCb3hGcmV0TGFiZWxzQ29udGFpbmVyKVxuXG4gICAgY2hvcmRCb3hGcmV0Ym9hcmRMYWJlbHNcbiAgICAgIC5tYXAoY2hvcmRCb3hGcmV0TGFiZWwgPT4ge1xuICAgICAgICBjaG9yZEJveEZyZXRMYWJlbHNHcm91cC5hZGQoY2hvcmRCb3hGcmV0TGFiZWwpXG4gICAgICB9KVxuXG4gICAgY2hvcmRCb3hGcmV0TGFiZWxzQ29udGFpbmVyLmJhY2soKVxuXG4gICAgY2hvcmRCb3hGcmV0TGFiZWxzR3JvdXAubW92ZShcbiAgICAgIENIT1JEQk9YX0RJTUVOU0lPTlMucGFkZGluZyxcbiAgICAgIENIT1JEQk9YX0RJTUVOU0lPTlMucGFkZGluZyArIENIT1JEQk9YX0RJTUVOU0lPTlMudGl0bGVIZWlnaHQgKyBDSE9SREJPWF9ESU1FTlNJT05TLnN0cmluZ0xhYmVsc0hlaWdodFxuICAgIClcblxuICAgIHJldHVybiBjaG9yZEJveEZyZXRMYWJlbHNHcm91cFxuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZWNob3JkQm94U3RyaW5nTGFiZWxzICgpIHtcbiAgICBjb25zdCBjaG9yZEJveFN0cmluZ0xhYmVsc0dyb3VwID0gU1ZHKCkuZ3JvdXAoKVxuXG4gICAgY29uc3Qgc3RyaW5nTGFiZWxzV2lkdGggPSBDSE9SREJPWF9ESU1FTlNJT05TLndpZHRoLSgyKkNIT1JEQk9YX0RJTUVOU0lPTlMucGFkZGluZyktQ0hPUkRCT1hfRElNRU5TSU9OUy5mcmV0TGFiZWxzV2lkdGhcbiAgICBjb25zdCBzdHJpbmdMYWJlbFdpZHRoID0gc3RyaW5nTGFiZWxzV2lkdGgvdGhpcy5jaG9yZEJveE9wdGlvbnMudHVuaW5ncy5sZW5ndGggLy8gc3RyaW5nIGNvdW50XG5cbiAgICBjb25zdCBjaG9yZEJveFN0cmluZ0xhYmVsc0NvbnRhaW5lciA9IFNWRygpXG4gICAgICAucmVjdChcbiAgICAgICAgc3RyaW5nTGFiZWxzV2lkdGgsXG4gICAgICAgIENIT1JEQk9YX0RJTUVOU0lPTlMuc3RyaW5nTGFiZWxzSGVpZ2h0XG4gICAgICApXG4gICAgICAuZmlsbChDSE9SREJPWF9ESU1FTlNJT05TLnN0cmluZ0xhYmVsc0NvbnRhaW5lckZpbGxDb2xvcilcbiAgICBcbiAgICBjb25zdCBjaG9yZEJveFN0cmluZ2JvYXJkTGFiZWxzID0gQXJyYXlcbiAgICAgIC5mcm9tKEFycmF5KHRoaXMuY2hvcmRCb3hPcHRpb25zLnR1bmluZ3MubGVuZ3RoIC8qIHN0cmluZyBjb3VudCAqLykpXG4gICAgICAubWFwKChfLCBzdHJpbmdMYWJlbEluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGNob3JkQm94U3RyaW5nTGFiZWxHcm91cD0gU1ZHKCkuZ3JvdXAoKVxuXG4gICAgICAgIGNvbnN0IGNob3JkQm94U3RyaW5nTGFiZWxDb250YWluZXIgPSBTVkcoKVxuICAgICAgICAgIC5yZWN0KFxuICAgICAgICAgICAgc3RyaW5nTGFiZWxXaWR0aCxcbiAgICAgICAgICAgIENIT1JEQk9YX0RJTUVOU0lPTlMuc3RyaW5nTGFiZWxzSGVpZ2h0XG4gICAgICAgICAgKVxuICAgICAgICAgIC5maWxsKENIT1JEQk9YX0RJTUVOU0lPTlMuc3RyaW5nTGFiZWxDb250YWluZXJGaWxsQ29sb3IpXG5cbiAgICAgICAgY29uc3QgY2hvcmRCb3hTdHJpbmdMYWJlbFRleHQgPSBTVkcoKVxuICAgICAgICAgIC5wbGFpbih0aGlzLmNob3JkQm94T3B0aW9ucy50dW5pbmdzW3N0cmluZ0xhYmVsSW5kZXhdKVxuICAgICAgICAgIC5hdHRyKHtcbiAgICAgICAgICAgICdmb250LXNpemUnOiBDSE9SREJPWF9ESU1FTlNJT05TLnN0cmluZ0xhYmVsRm9udFNpemUsXG4gICAgICAgICAgICAnZm9udC1mYW1pbHknOiAnQXJpYWwnXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZmlsbChDSE9SREJPWF9ESU1FTlNJT05TLnN0cmluZ0xhYmVsRm9udENvbG9yKVxuICAgICAgICAgIC5jeChzdHJpbmdMYWJlbFdpZHRoLzIpXG4gICAgICAgICAgLmN5KENIT1JEQk9YX0RJTUVOU0lPTlMuc3RyaW5nTGFiZWxzSGVpZ2h0LzIpXG5cbiAgICAgICAgY2hvcmRCb3hTdHJpbmdMYWJlbEdyb3VwLmFkZChjaG9yZEJveFN0cmluZ0xhYmVsQ29udGFpbmVyKVxuICAgICAgICBjaG9yZEJveFN0cmluZ0xhYmVsR3JvdXAuYWRkKGNob3JkQm94U3RyaW5nTGFiZWxUZXh0KVxuXG4gICAgICAgIGNob3JkQm94U3RyaW5nTGFiZWxDb250YWluZXIuYmFjaygpXG4gICAgICAgIGNob3JkQm94U3RyaW5nTGFiZWxUZXh0LmZyb250KClcblxuICAgICAgICBjaG9yZEJveFN0cmluZ0xhYmVsR3JvdXAubW92ZShcbiAgICAgICAgICBzdHJpbmdMYWJlbEluZGV4KnN0cmluZ0xhYmVsV2lkdGgsXG4gICAgICAgICAgMCxcbiAgICAgICAgKVxuXG4gICAgICAgIHJldHVybiBjaG9yZEJveFN0cmluZ0xhYmVsR3JvdXBcbiAgICAgIH0pXG5cbiAgICBjaG9yZEJveFN0cmluZ0xhYmVsc0dyb3VwLmFkZChjaG9yZEJveFN0cmluZ0xhYmVsc0NvbnRhaW5lcilcblxuICAgIGNob3JkQm94U3RyaW5nYm9hcmRMYWJlbHNcbiAgICAgIC5tYXAoY2hvcmRCb3hTdHJpbmdMYWJlbCA9PiB7XG4gICAgICAgIGNob3JkQm94U3RyaW5nTGFiZWxzR3JvdXAuYWRkKGNob3JkQm94U3RyaW5nTGFiZWwpXG4gICAgICB9KVxuXG4gICAgY2hvcmRCb3hTdHJpbmdMYWJlbHNDb250YWluZXIuYmFjaygpXG5cbiAgICBjaG9yZEJveFN0cmluZ0xhYmVsc0dyb3VwLm1vdmUoXG4gICAgICBDSE9SREJPWF9ESU1FTlNJT05TLnBhZGRpbmcgKyBDSE9SREJPWF9ESU1FTlNJT05TLmZyZXRMYWJlbHNXaWR0aCxcbiAgICAgIENIT1JEQk9YX0RJTUVOU0lPTlMucGFkZGluZyArIENIT1JEQk9YX0RJTUVOU0lPTlMudGl0bGVIZWlnaHQsXG4gICAgKVxuXG4gICAgcmV0dXJuIGNob3JkQm94U3RyaW5nTGFiZWxzR3JvdXBcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVDaG9yZGJveEJvZHkgKCkge1xuICAgIGNvbnN0IGNob3JkQm94Qm9keUdyb3VwID0gU1ZHKCkuZ3JvdXAoKVxuXG4gICAgY29uc3QgY2hvcmRCb3hCb2R5ID0gU1ZHKClcbiAgICAgIC5yZWN0KFxuICAgICAgICBDSE9SREJPWF9ESU1FTlNJT05TLndpZHRoLSgyKkNIT1JEQk9YX0RJTUVOU0lPTlMucGFkZGluZyktQ0hPUkRCT1hfRElNRU5TSU9OUy5mcmV0TGFiZWxzV2lkdGgsXG4gICAgICAgIENIT1JEQk9YX0RJTUVOU0lPTlMuaGVpZ2h0LSgyKkNIT1JEQk9YX0RJTUVOU0lPTlMucGFkZGluZyktQ0hPUkRCT1hfRElNRU5TSU9OUy50aXRsZUhlaWdodC1DSE9SREJPWF9ESU1FTlNJT05TLnN0cmluZ0xhYmVsc0hlaWdodFxuICAgICAgKVxuICAgICAgLmZpbGwoQ0hPUkRCT1hfRElNRU5TSU9OUy5ib2R5RmlsbENvbG9yKVxuXG4gICAgY2hvcmRCb3hCb2R5R3JvdXAuYWRkKGNob3JkQm94Qm9keSlcblxuICAgIGNob3JkQm94Qm9keUdyb3VwLm1vdmUoXG4gICAgICBDSE9SREJPWF9ESU1FTlNJT05TLnBhZGRpbmcrQ0hPUkRCT1hfRElNRU5TSU9OUy5mcmV0TGFiZWxzV2lkdGgsXG4gICAgICBDSE9SREJPWF9ESU1FTlNJT05TLnBhZGRpbmcrQ0hPUkRCT1hfRElNRU5TSU9OUy50aXRsZUhlaWdodCtDSE9SREJPWF9ESU1FTlNJT05TLnN0cmluZ0xhYmVsc0hlaWdodFxuICAgIClcblxuICAgIHJldHVybiBjaG9yZEJveEJvZHlHcm91cFxuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZWNob3JkQm94TnV0ICgpIHtcbiAgICBjb25zdCBjaG9yZEJveE51dEdyb3VwID0gU1ZHKCkuZ3JvdXAoKVxuXG4gICAgY29uc3QgY2hvcmRCb3hOdXRDb250YWluZXIgPSBTVkcoKVxuICAgICAgLnJlY3QoXG4gICAgICAgIChDSE9SREJPWF9ESU1FTlNJT05TLndpZHRoLSgyKkNIT1JEQk9YX0RJTUVOU0lPTlMucGFkZGluZyktQ0hPUkRCT1hfRElNRU5TSU9OUy5mcmV0TGFiZWxzV2lkdGgpLSgyKkNIT1JEQk9YX0RJTUVOU0lPTlMubnV0Q29udGFpbmVyUGFkZGluZyksXG4gICAgICAgIENIT1JEQk9YX0RJTUVOU0lPTlMubnV0SGVpZ2h0XG4gICAgICApXG4gICAgICAuZmlsbCgnbm9uZScpIC8vIGhpZGUgYnkgZGVmYXVsdFxuICAgICAgLnJhZGl1cyhDSE9SREJPWF9ESU1FTlNJT05TLm51dFJhZGl1cylcbiAgICBcbiAgICAvLyB0aGUgbnV0IHNob3VsZCBvbmx5IGJlIHZpc2libGUgaWYgYmFzZUZyZXQgPT09IDFcbiAgICBpZiAodGhpcy5jaG9yZEJveE9wdGlvbnMuYmFzZUZyZXQgPT09IDEpIHtcbiAgICAgIGNob3JkQm94TnV0Q29udGFpbmVyLmZpbGwoQ0hPUkRCT1hfRElNRU5TSU9OUy5udXRGaWxsQ29sb3IpXG4gICAgfVxuXG4gICAgY2hvcmRCb3hOdXRHcm91cC5hZGQoY2hvcmRCb3hOdXRDb250YWluZXIpXG5cbiAgICBjaG9yZEJveE51dEdyb3VwLm1vdmUoXG4gICAgICBDSE9SREJPWF9ESU1FTlNJT05TLnBhZGRpbmcrQ0hPUkRCT1hfRElNRU5TSU9OUy5mcmV0TGFiZWxzV2lkdGgrQ0hPUkRCT1hfRElNRU5TSU9OUy5udXRDb250YWluZXJQYWRkaW5nLFxuICAgICAgQ0hPUkRCT1hfRElNRU5TSU9OUy5wYWRkaW5nK0NIT1JEQk9YX0RJTUVOU0lPTlMudGl0bGVIZWlnaHQrQ0hPUkRCT1hfRElNRU5TSU9OUy5zdHJpbmdMYWJlbHNIZWlnaHRcbiAgICApXG5cbiAgICByZXR1cm4gY2hvcmRCb3hOdXRHcm91cFxuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZWNob3JkQm94RnJldHMgKCkge1xuICAgIGNvbnN0IGNob3JkQm94RnJldHNHcm91cCA9IFNWRygpLmdyb3VwKClcblxuICAgIGNvbnN0IGZyZXRzV2lkdGggPSAoQ0hPUkRCT1hfRElNRU5TSU9OUy53aWR0aC0oMipDSE9SREJPWF9ESU1FTlNJT05TLnBhZGRpbmcpLUNIT1JEQk9YX0RJTUVOU0lPTlMuZnJldExhYmVsc1dpZHRoKS0oMipDSE9SREJPWF9ESU1FTlNJT05TLm51dENvbnRhaW5lclBhZGRpbmcpXG4gICAgY29uc3QgZnJldHNIZWlnaHQgPSBDSE9SREJPWF9ESU1FTlNJT05TLmhlaWdodC0oMipDSE9SREJPWF9ESU1FTlNJT05TLnBhZGRpbmcpLUNIT1JEQk9YX0RJTUVOU0lPTlMudGl0bGVIZWlnaHQtQ0hPUkRCT1hfRElNRU5TSU9OUy5zdHJpbmdMYWJlbHNIZWlnaHQtQ0hPUkRCT1hfRElNRU5TSU9OUy5udXRIZWlnaHRcbiAgICBjb25zdCBmcmV0SGVpZ2h0ID0gZnJldHNIZWlnaHQvdGhpcy5jaG9yZEJveE9wdGlvbnMuZnJldHNcblxuICAgIGNvbnN0IGNob3JkQm94RnJldHNDb250YWluZXIgPSBTVkcoKVxuICAgICAgLnJlY3QoXG4gICAgICAgIGZyZXRzV2lkdGgsXG4gICAgICAgIGZyZXRzSGVpZ2h0XG4gICAgICApLmZpbGwoQ0hPUkRCT1hfRElNRU5TSU9OUy5mcmV0c0NvbnRhaW5lckZpbGxDb2xvcilcblxuICAgIGNvbnN0IGNob3JkQm94RnJldE1hcmtlcnMgPSBBcnJheVxuICAgICAgLmZyb20oQXJyYXkodGhpcy5jaG9yZEJveE9wdGlvbnMuZnJldHMpKVxuICAgICAgLm1hcCgoXywgZnJldE1hcmtlckluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGZyZXRNYXJrZXIgPSBTVkcoKVxuICAgICAgICAgIC5yZWN0KFxuICAgICAgICAgICAgZnJldHNXaWR0aCxcbiAgICAgICAgICAgIENIT1JEQk9YX0RJTUVOU0lPTlMuZnJldE1hcmtlckhlaWdodFxuICAgICAgICAgIClcbiAgICAgICAgICAuZmlsbChDSE9SREJPWF9ESU1FTlNJT05TLmZyZXRNYXJrZXJGaWxsQ29sb3IpXG5cbiAgICAgICAgZnJldE1hcmtlci5tb3ZlKFxuICAgICAgICAgIDAsXG4gICAgICAgICAgZnJldE1hcmtlckluZGV4KmZyZXRIZWlnaHQsXG4gICAgICAgIClcblxuICAgICAgICByZXR1cm4gZnJldE1hcmtlclxuICAgICAgfSlcblxuICAgIGNob3JkQm94RnJldHNHcm91cC5hZGQoY2hvcmRCb3hGcmV0c0NvbnRhaW5lcilcblxuICAgIGNob3JkQm94RnJldE1hcmtlcnMubWFwKGZyZXRNYXJrZXIgPT4ge1xuICAgICAgY2hvcmRCb3hGcmV0c0dyb3VwLmFkZChmcmV0TWFya2VyKVxuICAgIH0pXG5cbiAgICBjaG9yZEJveEZyZXRzR3JvdXAuYmFjaygpXG5cbiAgICBjaG9yZEJveEZyZXRzR3JvdXAubW92ZShcbiAgICAgIENIT1JEQk9YX0RJTUVOU0lPTlMucGFkZGluZytDSE9SREJPWF9ESU1FTlNJT05TLmZyZXRMYWJlbHNXaWR0aCtDSE9SREJPWF9ESU1FTlNJT05TLm51dENvbnRhaW5lclBhZGRpbmcsXG4gICAgICBDSE9SREJPWF9ESU1FTlNJT05TLnBhZGRpbmcrQ0hPUkRCT1hfRElNRU5TSU9OUy50aXRsZUhlaWdodCtDSE9SREJPWF9ESU1FTlNJT05TLnN0cmluZ0xhYmVsc0hlaWdodCtDSE9SREJPWF9ESU1FTlNJT05TLm51dEhlaWdodFxuICAgIClcblxuICAgIHJldHVybiBjaG9yZEJveEZyZXRzR3JvdXBcbiAgfVxuICBcbiAgcHJpdmF0ZSBnZW5lcmF0ZUNob3JkQm94U3RyaW5ncyAoKSB7XG4gICAgY29uc3QgY2hvcmRCb3hTdHJpbmdzR3JvdXAgPSBTVkcoKS5ncm91cCgpXG5cbiAgICBjb25zdCBzdHJpbmdzV2lkdGggPSBDSE9SREJPWF9ESU1FTlNJT05TLndpZHRoLSgyKkNIT1JEQk9YX0RJTUVOU0lPTlMucGFkZGluZyktQ0hPUkRCT1hfRElNRU5TSU9OUy5mcmV0TGFiZWxzV2lkdGhcbiAgICBjb25zdCBzdHJpbmdzSGVpZ2h0ID0gQ0hPUkRCT1hfRElNRU5TSU9OUy5oZWlnaHQtKDIqQ0hPUkRCT1hfRElNRU5TSU9OUy5wYWRkaW5nKS1DSE9SREJPWF9ESU1FTlNJT05TLnRpdGxlSGVpZ2h0LUNIT1JEQk9YX0RJTUVOU0lPTlMuc3RyaW5nTGFiZWxzSGVpZ2h0LUNIT1JEQk9YX0RJTUVOU0lPTlMubnV0SGVpZ2h0XG4gICAgY29uc3Qgc3RyaW5nV2lkdGggPSBzdHJpbmdzV2lkdGgvdGhpcy5jaG9yZEJveE9wdGlvbnMudHVuaW5ncy5sZW5ndGhcbiAgICBjb25zdCBzdHJpbmdHdWFnZVNjYWxlRmFjdG9yID0gMC4xMjVcblxuICAgIGNvbnN0IGNob3JkQm94U3RyaW5nc0NvbnRhaW5lciA9IFNWRygpXG4gICAgICAucmVjdChcbiAgICAgICAgc3RyaW5nc1dpZHRoLFxuICAgICAgICBzdHJpbmdzSGVpZ2h0XG4gICAgICApLmZpbGwoJ25vbmUnKSAvLyBzbyBmcmV0cyBzaG93IHRocm91Z2hcblxuICAgIGNvbnN0IGNob3JkQm94U3RyaW5ncyA9IEFycmF5XG4gICAgICAuZnJvbShBcnJheSh0aGlzLmNob3JkQm94T3B0aW9ucy50dW5pbmdzLmxlbmd0aCkpXG4gICAgICAubWFwKChfLCBzdHJpbmdJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBzdHJpbmdHdWFnZSA9IHRoaXMuY2hvcmRCb3hPcHRpb25zLmd1YWdlc1tzdHJpbmdJbmRleF0gKiBzdHJpbmdHdWFnZVNjYWxlRmFjdG9yXG5cbiAgICAgICAgY29uc3Qgc3RyaW5nID0gU1ZHKClcbiAgICAgICAgICAucmVjdChzdHJpbmdHdWFnZSwgc3RyaW5nc0hlaWdodClcbiAgICAgICAgICAuZmlsbChDSE9SREJPWF9ESU1FTlNJT05TLnN0cmluZ0ZpbGxDb2xvcilcblxuICAgICAgICBzdHJpbmcubW92ZShcbiAgICAgICAgICBzdHJpbmdJbmRleCpzdHJpbmdXaWR0aCArIHN0cmluZ1dpZHRoLzIsXG4gICAgICAgICAgMCxcbiAgICAgICAgKVxuXG4gICAgICAgIHJldHVybiBzdHJpbmdcbiAgICAgIH0pXG5cbiAgICBjaG9yZEJveFN0cmluZ3NHcm91cC5hZGQoY2hvcmRCb3hTdHJpbmdzQ29udGFpbmVyKVxuXG4gICAgY2hvcmRCb3hTdHJpbmdzLm1hcChzdHJpbmcgPT4ge1xuICAgICAgY2hvcmRCb3hTdHJpbmdzR3JvdXAuYWRkKHN0cmluZylcbiAgICB9KVxuXG4gICAgY2hvcmRCb3hTdHJpbmdzR3JvdXAuYmFjaygpXG5cbiAgICBjaG9yZEJveFN0cmluZ3NHcm91cC5tb3ZlKFxuICAgICAgQ0hPUkRCT1hfRElNRU5TSU9OUy5wYWRkaW5nK0NIT1JEQk9YX0RJTUVOU0lPTlMuZnJldExhYmVsc1dpZHRoLFxuICAgICAgQ0hPUkRCT1hfRElNRU5TSU9OUy5wYWRkaW5nK0NIT1JEQk9YX0RJTUVOU0lPTlMudGl0bGVIZWlnaHQrQ0hPUkRCT1hfRElNRU5TSU9OUy5zdHJpbmdMYWJlbHNIZWlnaHQrQ0hPUkRCT1hfRElNRU5TSU9OUy5udXRIZWlnaHRcbiAgICApXG5cbiAgICByZXR1cm4gY2hvcmRCb3hTdHJpbmdzR3JvdXBcbiAgfVxuICBwcml2YXRlIGdlbmVyYXRlQ2hvcmRCb3hEb3RzICgpIHtcbiAgICBjb25zdCBjaG9yZEJveERvdHNHcm91cCA9IFNWRygpLmdyb3VwKClcblxuICAgIGNvbnN0IGRvdHNXaWR0aCA9IENIT1JEQk9YX0RJTUVOU0lPTlMud2lkdGgtKDIqQ0hPUkRCT1hfRElNRU5TSU9OUy5wYWRkaW5nKS1DSE9SREJPWF9ESU1FTlNJT05TLmZyZXRMYWJlbHNXaWR0aFxuICAgIGNvbnN0IGRvdHNIZWlnaHQgPSBDSE9SREJPWF9ESU1FTlNJT05TLmhlaWdodC0oMipDSE9SREJPWF9ESU1FTlNJT05TLnBhZGRpbmcpLUNIT1JEQk9YX0RJTUVOU0lPTlMudGl0bGVIZWlnaHQtQ0hPUkRCT1hfRElNRU5TSU9OUy5zdHJpbmdMYWJlbHNIZWlnaHQtQ0hPUkRCT1hfRElNRU5TSU9OUy5udXRIZWlnaHRcbiAgICBjb25zdCBkb3RXaWR0aCA9IGRvdHNXaWR0aC90aGlzLmNob3JkQm94T3B0aW9ucy50dW5pbmdzLmxlbmd0aFxuICAgIGNvbnN0IGRvdEhlaWdodCA9IGRvdHNIZWlnaHQvdGhpcy5jaG9yZEJveE9wdGlvbnMuZnJldHNcblxuICAgIGNvbnN0IHN0cmluZ3MgPSB0aGlzLmNob3JkQm94T3B0aW9ucy50dW5pbmdzLmxlbmd0aFxuICAgIGNvbnN0IGd1YWdlcyA9IHRoaXMuY2hvcmRCb3hPcHRpb25zLmd1YWdlc1xuICAgIGNvbnN0IHN0cmluZ0d1YWdlU2NhbGVGYWN0b3IgPSAwLjEyNVxuXG4gICAgY29uc3Qgb3B0aW9uc0RvdHMgPSB0aGlzLmNob3JkQm94T3B0aW9ucy5kb3RzXG5cbiAgICBjb25zdCBjaG9yZEJveERvdHNDb250YWluZXIgPSBTVkcoKVxuICAgICAgLnJlY3QoXG4gICAgICAgIGRvdHNXaWR0aCxcbiAgICAgICAgZG90c0hlaWdodFxuICAgICAgKS5maWxsKCdub25lJykgLy8gc28gZG90cyBzaG93IHRocm91Z2hcblxuICAgIGNvbnN0IGNob3JkQm94RG90cyA9IEFycmF5XG4gICAgICAuZnJvbShvcHRpb25zRG90cylcbiAgICAgIC5tYXAoZG90ID0+IHtcbiAgICAgICAgY29uc3QgZG90R3JvdXAgPSBTVkcoKS5ncm91cCgpXG5cbiAgICAgICAgY29uc3QgZG90Q29udGFpbmVyID0gU1ZHKClcbiAgICAgICAgICAuY2lyY2xlKENIT1JEQk9YX0RJTUVOU0lPTlMuZG90U2l6ZSlcbiAgICAgICAgICAuZmlsbChDSE9SREJPWF9ESU1FTlNJT05TLmRvdEZpbGxDb2xvcilcblxuICAgICAgICBkb3RDb250YWluZXJcbiAgICAgICAgICAuY3goKChzdHJpbmdzIC0gZG90LnN0cmluZykgKiBkb3RXaWR0aCArIGRvdFdpZHRoLzIpICsgKGd1YWdlc1tzdHJpbmdzIC0gZG90LnN0cmluZ10gKiBzdHJpbmdHdWFnZVNjYWxlRmFjdG9yKSAvIDIpXG4gICAgICAgICAgLmN5KChkb3QuZnJldC0xKSAqIGRvdEhlaWdodCArIGRvdEhlaWdodC8yKVxuXG4gICAgICAgIC8vIGR1ZSB0byBvdXIgY29udGFpbmVyIGRpbWVuc2lvbnNcbiAgICAgICAgaWYgKGRvdC5mcmV0ID09PSAxKSB7XG4gICAgICAgICAgZG90Q29udGFpbmVyLmN5KGRvdEhlaWdodC8yICsgQ0hPUkRCT1hfRElNRU5TSU9OUy5udXRIZWlnaHQvKDIqdGhpcy5jaG9yZEJveE9wdGlvbnMuZnJldHMpKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZG90VGV4dCA9IFNWRygpXG4gICAgICAgICAgLnBsYWluKHRoaXMuY2hvcmRCb3hPcHRpb25zLmRvdFRleHQoZG90KSlcbiAgICAgICAgICAuYXR0cih7XG4gICAgICAgICAgICAnZm9udC1zaXplJzogQ0hPUkRCT1hfRElNRU5TSU9OUy5kb3RGb250U2l6ZSxcbiAgICAgICAgICAgICdmb250LWZhbWlseSc6ICdBcmlhbCdcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5maWxsKCcjZmZmJylcblxuICAgICAgICBkb3RUZXh0XG4gICAgICAgICAgLmN4KCgoc3RyaW5ncyAtIGRvdC5zdHJpbmcpICogZG90V2lkdGggKyBkb3RXaWR0aC8yKSArIChndWFnZXNbc3RyaW5ncyAtIGRvdC5zdHJpbmddICogc3RyaW5nR3VhZ2VTY2FsZUZhY3RvcikgLyAyKVxuICAgICAgICAgIC5jeSgoZG90LmZyZXQtMSkgKiBkb3RIZWlnaHQgKyBkb3RIZWlnaHQvMilcblxuICAgICAgICAvLyBkdWUgdG8gb3VyIGNvbnRhaW5lciBkaW1lbnNpb25zXG4gICAgICAgIGlmIChkb3QuZnJldCA9PT0gMSkge1xuICAgICAgICAgIGRvdFRleHQuY3koZG90SGVpZ2h0LzIgKyBDSE9SREJPWF9ESU1FTlNJT05TLm51dEhlaWdodC8oMip0aGlzLmNob3JkQm94T3B0aW9ucy5mcmV0cykpXG4gICAgICAgIH1cblxuICAgICAgICBkb3RHcm91cC5hZGQoZG90Q29udGFpbmVyKVxuICAgICAgICBkb3RHcm91cC5hZGQoZG90VGV4dClcblxuICAgICAgICBkb3RDb250YWluZXIuYmFjaygpXG4gICAgICAgIGRvdFRleHQuZnJvbnQoKVxuXG4gICAgICAgIHJldHVybiBkb3RHcm91cFxuICAgICAgfSlcblxuICAgIGNob3JkQm94RG90c0dyb3VwLmFkZChjaG9yZEJveERvdHNDb250YWluZXIpXG5cbiAgICBjaG9yZEJveERvdHMubWFwKGRvdCA9PiB7XG4gICAgICBjaG9yZEJveERvdHNHcm91cC5hZGQoZG90KVxuICAgIH0pXG5cbiAgICBjaG9yZEJveERvdHNHcm91cC5iYWNrKClcblxuICAgIGNob3JkQm94RG90c0dyb3VwLm1vdmUoXG4gICAgICBDSE9SREJPWF9ESU1FTlNJT05TLnBhZGRpbmcrQ0hPUkRCT1hfRElNRU5TSU9OUy5mcmV0TGFiZWxzV2lkdGgsXG4gICAgICBDSE9SREJPWF9ESU1FTlNJT05TLnBhZGRpbmcrQ0hPUkRCT1hfRElNRU5TSU9OUy50aXRsZUhlaWdodCtDSE9SREJPWF9ESU1FTlNJT05TLnN0cmluZ0xhYmVsc0hlaWdodCtDSE9SREJPWF9ESU1FTlNJT05TLm51dEhlaWdodFxuICAgIClcblxuICAgIHJldHVybiBjaG9yZEJveERvdHNHcm91cFxuICB9XG5cbiAgc2V0RG90cyAoZG90czogQ2hvcmRCb3hEb3RbXSkge1xuICAgIHRoaXMuY2hvcmRCb3hPcHRpb25zLmRvdHMgPSBkb3RzXG5cbiAgICB0aGlzLnJlbmRlcigpXG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG4gIFxuICByZW5kZXIgKCkge1xuICAgIC8vIGFsd2F5cyBjbGVhciB0aGUgcmVuZGVyZXJcbiAgICB0aGlzLnJlbmRlcmVyLmNsZWFyKClcblxuICAgIC8vIGJ1aWxkIGl0IHVwIGluIGxheWVyc1xuICAgIHRoaXMucmVuZGVyZXIuYWRkKHRoaXMuZ2VuZXJhdGVDaG9yZEJveEJhc2UoKSlcbiAgICB0aGlzLnJlbmRlcmVyLmFkZCh0aGlzLmdlbmVyYXRlQ2hvcmRCb3hUaXRsZSgpKVxuXG4gICAgdGhpcy5yZW5kZXJlci5hZGQodGhpcy5nZW5lcmF0ZWNob3JkQm94RnJldExhYmVscygpKVxuICAgIHRoaXMucmVuZGVyZXIuYWRkKHRoaXMuZ2VuZXJhdGVjaG9yZEJveFN0cmluZ0xhYmVscygpKVxuXG4gICAgLy8gLy8gYnVpbGQgdGhlIGJvZHkgcGFydHNcbiAgICB0aGlzLnJlbmRlcmVyLmFkZCh0aGlzLmdlbmVyYXRlQ2hvcmRib3hCb2R5KCkpXG4gICAgdGhpcy5yZW5kZXJlci5hZGQodGhpcy5nZW5lcmF0ZWNob3JkQm94TnV0KCkpXG4gICAgdGhpcy5yZW5kZXJlci5hZGQodGhpcy5nZW5lcmF0ZWNob3JkQm94RnJldHMoKSlcbiAgICB0aGlzLnJlbmRlcmVyLmFkZCh0aGlzLmdlbmVyYXRlQ2hvcmRCb3hTdHJpbmdzKCkpXG4gICAgdGhpcy5yZW5kZXJlci5hZGQodGhpcy5nZW5lcmF0ZUNob3JkQm94RG90cygpKVxuXG4gICAgLy8gZml4ZXMgY2hyb21lIHJlbmRlcmluZyBpc3N1ZVxuICAgIHRoaXMucmVuZGVyZXJcbiAgICAgIC5hdHRyKHtcbiAgICAgICAgd2lkdGg6IENIT1JEQk9YX0RJTUVOU0lPTlMud2lkdGgsXG4gICAgICAgIGhlaWdodDogQ0hPUkRCT1hfRElNRU5TSU9OUy5oZWlnaHQsXG4gICAgICB9KVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHRvU1ZHICgpIHtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXJlci5zdmcoKVxuICB9XG5cbiAgdG9TVkdCYXNlNjRVUkkgKCkge1xuICAgIHJldHVybiBgZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCwke0J1ZmZlci5mcm9tKHRoaXMucmVuZGVyZXIuc3ZnKCkpLnRvU3RyaW5nKFwiYmFzZTY0XCIpfWBcbiAgfVxufVxuXG5leHBvcnQgeyBDaG9yZEJveCB9IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJzdmdkb21cIik7Il0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsImdsb2JhbCIsInJlcXVpcmUiLCJ3aW5kb3ciLCJjcmVhdGVTVkdXaW5kb3ciLCJkb2N1bWVudCIsInJlZ2lzdGVyV2luZG93Il0sInNvdXJjZVJvb3QiOiIifQ==